{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jack\\\\Dropbox\\\\HW\\\\INF 141 - CS 121\\\\Project 3\\\\Milestone 2\\\\gugol\\\\src\\\\Containers\\\\SearchingPage.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { ListResult } from \"../Components/ListResult\";\nimport { PageNavigation } from \"../Components/PageNavigation\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport TopBar from \"../Components/TopBar\";\nimport axios from \"axios\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Box from \"@material-ui/core/Box\";\nimport Divider from \"@material-ui/core/Divider\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginLeft: ({\n      matches\n    }) => matches ? theme.spacing(1.5) : theme.spacing(15)\n  },\n  stats: {\n    color: \"#52565a\",\n    fontSize: 14,\n    fontFamily: \"Arial\",\n    marginTop: theme.spacing(2),\n    marginLeft: theme.spacing(1),\n    marginBottom: theme.spacing(2)\n  }\n}));\nexport const SearchingPage = () => {\n  const [results, setResults] = useState([]);\n  const [querySpeed, setQuerySpeed] = useState(\"\");\n  const [numberResultsFound, setNumberResultsFound] = useState(0);\n  const [searchText, setSearchText] = useState([]);\n  const [searchLemmatized, setSearchLemmatized] = useState([]);\n  const history = useHistory();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.down(680));\n  const classes = useStyles({\n    matches\n  });\n\n  const getParams = () => {\n    const decoded = decodeURI(history.location.search).split(/^(\\?q=)?/)[2].split(\"&\");\n    const params = {\n      query: decoded[0],\n      start: decoded[1].replace(\"start=\", \"\")\n    };\n    return params;\n  };\n\n  const getData = async () => {\n    const {\n      query,\n      start\n    } = getParams();\n    const reply = await axios({\n      method: \"get\",\n      url: \"http://127.0.0.1:5000/api\",\n      params: {\n        query: query,\n        start: start\n      }\n    });\n    setResults(reply.data.results);\n    setSearchText(query);\n    setQuerySpeed(reply.data.query_speed);\n    setNumberResultsFound(reply.data.number_results_found);\n    setSearchLemmatized(reply.data.search_lemmatized);\n  };\n\n  const onSearch = () => {\n    if (searchText.length > 3) {\n      history.push(`/search?q=${searchText}&start=0`);\n      window.scrollTo(0, 0);\n    }\n  };\n\n  useEffect(() => {\n    getData(); // eslint-disable-next-line\n  }, [history.location.search]);\n  return React.createElement(\"div\", {\n    style: {\n      border: \"1px solid blue\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(TopBar, {\n    searchText: searchText,\n    setSearchText: setSearchText,\n    onSearch: onSearch,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(Box, {\n    className: classes.stats,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"About \", (Math.floor(numberResultsFound / 100) * 100).toLocaleString(), \" \", \"results (\", querySpeed, \" seconds)\"), React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, results.slice(6).map(result => React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(ListResult, {\n    key: result.url,\n    url: result.url,\n    title: result.title,\n    snippet: result.snippet,\n    searchLemmatized: searchLemmatized,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  })))), React.createElement(PageNavigation, {\n    searchText: searchText,\n    numberResultsFound: numberResultsFound,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  })));\n};","map":{"version":3,"sources":["C:/Users/Jack/Dropbox/HW/INF 141 - CS 121/Project 3/Milestone 2/gugol/src/Containers/SearchingPage.js"],"names":["React","useState","useEffect","useHistory","ListResult","PageNavigation","makeStyles","useTheme","useMediaQuery","TopBar","axios","Grid","Box","Divider","useStyles","theme","root","marginLeft","matches","spacing","stats","color","fontSize","fontFamily","marginTop","marginBottom","SearchingPage","results","setResults","querySpeed","setQuerySpeed","numberResultsFound","setNumberResultsFound","searchText","setSearchText","searchLemmatized","setSearchLemmatized","history","breakpoints","down","classes","getParams","decoded","decodeURI","location","search","split","params","query","start","replace","getData","reply","method","url","data","query_speed","number_results_found","search_lemmatized","onSearch","length","push","window","scrollTo","border","Math","floor","toLocaleString","slice","map","result","title","snippet"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { ListResult } from \"../Components/ListResult\";\r\nimport { PageNavigation } from \"../Components/PageNavigation\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport TopBar from \"../Components/TopBar\";\r\nimport axios from \"axios\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginLeft: ({ matches }) =>\r\n      matches ? theme.spacing(1.5) : theme.spacing(15)\r\n  },\r\n  stats: {\r\n    color: \"#52565a\",\r\n    fontSize: 14,\r\n    fontFamily: \"Arial\",\r\n    marginTop: theme.spacing(2),\r\n    marginLeft: theme.spacing(1),\r\n    marginBottom: theme.spacing(2)\r\n  }\r\n}));\r\n\r\nexport const SearchingPage = () => {\r\n  const [results, setResults] = useState([]);\r\n  const [querySpeed, setQuerySpeed] = useState(\"\");\r\n  const [numberResultsFound, setNumberResultsFound] = useState(0);\r\n  const [searchText, setSearchText] = useState([]);\r\n  const [searchLemmatized, setSearchLemmatized] = useState([]);\r\n  const history = useHistory();\r\n  const theme = useTheme();\r\n  const matches = useMediaQuery(theme.breakpoints.down(680));\r\n  const classes = useStyles({ matches });\r\n\r\n  const getParams = () => {\r\n    const decoded = decodeURI(history.location.search)\r\n      .split(/^(\\?q=)?/)[2]\r\n      .split(\"&\");\r\n    const params = {\r\n      query: decoded[0],\r\n      start: decoded[1].replace(\"start=\", \"\")\r\n    };\r\n    return params;\r\n  };\r\n\r\n  const getData = async () => {\r\n    const { query, start } = getParams();\r\n    const reply = await axios({\r\n      method: \"get\",\r\n      url: \"http://127.0.0.1:5000/api\",\r\n      params: {\r\n        query: query,\r\n        start: start\r\n      }\r\n    });\r\n    setResults(reply.data.results);\r\n    setSearchText(query);\r\n    setQuerySpeed(reply.data.query_speed);\r\n    setNumberResultsFound(reply.data.number_results_found);\r\n    setSearchLemmatized(reply.data.search_lemmatized);\r\n  };\r\n\r\n  const onSearch = () => {\r\n    if (searchText.length > 3) {\r\n      history.push(`/search?q=${searchText}&start=0`);\r\n      window.scrollTo(0, 0);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n    // eslint-disable-next-line\r\n  }, [history.location.search]);\r\n\r\n  return (\r\n    <div style={{ border: \"1px solid blue\" }}>\r\n      <TopBar\r\n        searchText={searchText}\r\n        setSearchText={setSearchText}\r\n        onSearch={onSearch}\r\n      />\r\n      <Divider />\r\n      <div className={classes.root}>\r\n        <Box className={classes.stats}>\r\n          About {(Math.floor(numberResultsFound / 100) * 100).toLocaleString()}{\" \"}\r\n          results ({querySpeed} seconds)\r\n        </Box>\r\n        <Grid container direction=\"column\">\r\n          {results.slice(6).map(result => (\r\n            <Grid item>\r\n              <ListResult\r\n                key={result.url}\r\n                url={result.url}\r\n                title={result.title}\r\n                snippet={result.snippet}\r\n                searchLemmatized={searchLemmatized}\r\n              />\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n        <PageNavigation\r\n          searchText={searchText}\r\n          numberResultsFound={numberResultsFound}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}